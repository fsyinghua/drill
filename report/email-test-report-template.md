# 邮件通知功能测试报告

**测试日期**: ____ 年 ____ 月 ____ 日  
**测试人员**: ___________  
**VM名称**: ___________  
**测试模式**: 独立邮件测试（不执行Azure ASR指令）

---

## 测试环境

| 配置项 | 值 | 状态 |
|:-----|:---|:---:|
| SMTP服务器 | ___________ | ☐ |
| 端口 | ___________ | ☐ |
| 使用SSL | 是 / 否 | ☐ |
| 发件人 | ___________ | ☐ |
| 收件人 | ___________ | ☐ |

---

## 测试用例

### 测试用例 1: Step 1 故障转移通知

| 项目 | 值 |
|:----|:---|
| 测试步骤 | Step 1 |
| 邮件主题 | `[DRILL] <VM_NAME> step 1` |
| 预期结果 | 邮件发送成功 |
| 实际结果 | ☐ 通过 / ☐ 失败 |
| 收到时间 | ____ 年 ____ 月 ____ 日 ____:____ |
| 备注 | |

---

### 测试用例 2: Step 2 确认故障转移通知

| 项目 | 值 |
|:----|:---|
| 测试步骤 | Step 2 |
| 邮件主题 | `[DRILL] <VM_NAME> step 2` |
| 预期结果 | 邮件发送成功 |
| 实际结果 | ☐ 通过 / ☐ 失败 |
| 收到时间 | ____ 年 ____ 月 ____ 日 ____:____ |
| 备注 | |

---

### 测试用例 3: Step 3 逆向同步通知

| 项目 | 值 |
|:----|:---|
| 测试步骤 | Step 3 |
| 邮件主题 | `[DRILL] <VM_NAME> step 3` |
| 预期结果 | 邮件发送成功 |
| 实际结果 | ☐ 通过 / ☐ 失败 |
| 收到时间 | ____ 年 ____ 月 ____ 日 ____:____ |
| 备注 | |

---

### 测试用例 4: Step 4 故障还原通知

| 项目 | 值 |
|:----|:---|
| 测试步骤 | Step 4 |
| 邮件主题 | `[DRILL] <VM_NAME> step 4` |
| 预期结果 | 邮件发送成功 |
| 实际结果 | ☐ 通过 / ☐ 失败 |
| 收到时间 | ____ 年 ____ 月 ____ 日 ____:____ |
| 备注 | |

---

### 测试用例 5: Step 5 确认故障还原通知

| 项目 | 值 |
|:----|:---|
| 测试步骤 | Step 5 |
| 邮件主题 | `[DRILL] <VM_NAME> step 5` |
| 预期结果 | 邮件发送成功 |
| 实际结果 | ☐ 通过 / ☐ 失败 |
| 收到时间 | ____ 年 ____ 月 ____ 日 ____:____ |
| 备注 | |

---

### 测试用例 6: Step 6 恢复同步通知

| 项目 | 值 |
|:----|:---|
| 测试步骤 | Step 6 |
| 邮件主题 | `[DRILL] <VM_NAME> step 6` |
| 预期结果 | 邮件发送成功 |
| 实际结果 | ☐ 通过 / ☐ 失败 |
| 收到时间 | ____ 年 ____ 月 ____ 日 ____:____ |
| 备注 | |

---

## 测试结果汇总

| 指标 | 值 |
|:----|:---|
| 总测试数 | 6 |
| 通过 | ____ |
| 失败 | ____ |
| 通过率 | ____% |

## 测试结论

☐ 所有邮件测试通过，邮件功能正常  
☐ 部分邮件测试失败，需要检查邮件服务器配置

**备注**:

---

## 执行命令

```powershell
# 测试单台VM单步骤
.\test-email-only.ps1 -vmName <VM_NAME> -step <STEP>

# 测试单台VM全部6步
.\test-email-only.ps1 -vmName <VM_NAME> -step All

# 测试批量VM
# 建议在 vms.txt 中指定VM，每步逐一测试
```

---

**报告生成时间**: ___________
